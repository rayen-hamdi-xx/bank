{"ast":null,"code":"import axios from\"axios\";import{useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Form2(props){const[resp,setResponse]=useState({});const[data,setdata]=useState('');const sendSoapRequest=async e=>{e.preventDefault();const url='http://127.0.0.1:8000/bank/management/';const soapEnvelope=`<x:Envelope\n    xmlns:x=\"http://schemas.xmlsoap.org/soap/envelope/\"\n    xmlns:ban=\"bank.isg.tn\">\n    <x:Header/>\n    <x:Body>\n        <ban:get_account_details>\n            <ban:email>${data}</ban:email>\n        </ban:get_account_details>\n    </x:Body>\n</x:Envelope>`;const config={headers:{'Content-Type':'text/xml;charset=UTF-8'}};try{var _xmlDoc$getElementsBy,_xmlDoc$getElementsBy2,_xmlDoc$getElementsBy3,_xmlDoc$getElementsBy4,_xmlDoc$getElementsBy5,_xmlDoc$getElementsBy6,_xmlDoc$getElementsBy7;const response=await axios.post(url,soapEnvelope,config);const parser=new DOMParser();const xmlDoc=parser.parseFromString(response.data,\"text/xml\");const rib=(_xmlDoc$getElementsBy=xmlDoc.getElementsByTagName(\"s0:rib\")[0])===null||_xmlDoc$getElementsBy===void 0?void 0:_xmlDoc$getElementsBy.textContent;const cin=(_xmlDoc$getElementsBy2=xmlDoc.getElementsByTagName(\"s0:cin\")[0])===null||_xmlDoc$getElementsBy2===void 0?void 0:_xmlDoc$getElementsBy2.textContent;const name=(_xmlDoc$getElementsBy3=xmlDoc.getElementsByTagName(\"s0:name\")[0])===null||_xmlDoc$getElementsBy3===void 0?void 0:_xmlDoc$getElementsBy3.textContent;const familyName=(_xmlDoc$getElementsBy4=xmlDoc.getElementsByTagName(\"s0:familyName\")[0])===null||_xmlDoc$getElementsBy4===void 0?void 0:_xmlDoc$getElementsBy4.textContent;const email=(_xmlDoc$getElementsBy5=xmlDoc.getElementsByTagName(\"s0:email\")[0])===null||_xmlDoc$getElementsBy5===void 0?void 0:_xmlDoc$getElementsBy5.textContent;const balance=(_xmlDoc$getElementsBy6=xmlDoc.getElementsByTagName(\"s0:balance\")[0])===null||_xmlDoc$getElementsBy6===void 0?void 0:_xmlDoc$getElementsBy6.textContent;const creationDate=(_xmlDoc$getElementsBy7=xmlDoc.getElementsByTagName(\"s0:creationDate\")[0])===null||_xmlDoc$getElementsBy7===void 0?void 0:_xmlDoc$getElementsBy7.textContent;setResponse({rib,cin,name,familyName,email,balance,creationDate});}catch(error){setResponse('Error occurred while adding the account');}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:sendSoapRequest,className:\"text-neutral-800 transition-all duration-300 font-regular text-[18px] px-8 w-full flex flex-col items-center gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-1 w-full\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"mail\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{id:\"mail\",value:data,onChange:e=>setdata(e.target.value),name:\"mail\",className:\"ring-1 ring-neutral-500 rounded-sm outline-none px-2 py-1 text-[16px] text-neutral-700 \"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"RIB: \",resp.rib]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"CIN: \",resp.cin]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Name: \",resp.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Family Name: \",resp.familyName]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",resp.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Balance: \",resp.balance]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Creation Date: \",resp.creationDate]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"py-2 px-6 bg-neutral-800 hover:bg-neutral-900 transition-all duration-300  text-white rounded-md mt-4 w-full\",children:\"View Account \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[16px] text-neutral-600 flex justify-center ml-6 gap-5 w-full\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"hover:text-neutral-800\",onClick:()=>props.setForm(1),children:\"  Add Account  \"}),\"-\",/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"hover:text-neutral-800\",onClick:()=>props.setForm(3),children:\"View All Accounts \"})]})]});}","map":{"version":3,"names":["axios","useState","jsx","_jsx","jsxs","_jsxs","Form2","props","resp","setResponse","data","setdata","sendSoapRequest","e","preventDefault","url","soapEnvelope","config","headers","_xmlDoc$getElementsBy","_xmlDoc$getElementsBy2","_xmlDoc$getElementsBy3","_xmlDoc$getElementsBy4","_xmlDoc$getElementsBy5","_xmlDoc$getElementsBy6","_xmlDoc$getElementsBy7","response","post","parser","DOMParser","xmlDoc","parseFromString","rib","getElementsByTagName","textContent","cin","name","familyName","email","balance","creationDate","error","onSubmit","className","children","for","id","value","onChange","target","type","onClick","setForm"],"sources":["C:/Users/blade/OneDrive/Desktop/jdango/bank/bank_ui/src/form2.jsx"],"sourcesContent":["import axios from \"axios\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function Form2(props) {\r\n    const [resp, setResponse] = useState({});\r\n        const [data,setdata]=useState('');\r\n\r\n\r\n        const sendSoapRequest = async (e) => {\r\n            e.preventDefault();\r\n            const url = 'http://127.0.0.1:8000/bank/management/'; \r\n            const soapEnvelope = `<x:Envelope\r\n    xmlns:x=\"http://schemas.xmlsoap.org/soap/envelope/\"\r\n    xmlns:ban=\"bank.isg.tn\">\r\n    <x:Header/>\r\n    <x:Body>\r\n        <ban:get_account_details>\r\n            <ban:email>${data}</ban:email>\r\n        </ban:get_account_details>\r\n    </x:Body>\r\n</x:Envelope>`;\r\n        \r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'text/xml;charset=UTF-8',\r\n        },\r\n    };\r\n\r\n    try {\r\n        const response = await axios.post(url, soapEnvelope, config);\r\n        \r\n        const parser = new DOMParser();\r\n        const xmlDoc = parser.parseFromString(response.data, \"text/xml\");\r\n\r\n        const rib = xmlDoc.getElementsByTagName(\"s0:rib\")[0]?.textContent;\r\n        const cin = xmlDoc.getElementsByTagName(\"s0:cin\")[0]?.textContent;\r\n        const name = xmlDoc.getElementsByTagName(\"s0:name\")[0]?.textContent;\r\n        const familyName = xmlDoc.getElementsByTagName(\"s0:familyName\")[0]?.textContent;\r\n        const email = xmlDoc.getElementsByTagName(\"s0:email\")[0]?.textContent;\r\n        const balance = xmlDoc.getElementsByTagName(\"s0:balance\")[0]?.textContent;\r\n        const creationDate = xmlDoc.getElementsByTagName(\"s0:creationDate\")[0]?.textContent;\r\n        setResponse({ rib, cin, name, familyName, email, balance, creationDate });\r\n\r\n    } catch (error) {\r\n        \r\n        setResponse('Error occurred while adding the account');\r\n    }\r\n};\r\n    return (\r\n        <form onSubmit={sendSoapRequest} className='text-neutral-800 transition-all duration-300 font-regular text-[18px] px-8 w-full flex flex-col items-center gap-6'>\r\n               <div className='flex flex-col gap-1 w-full'>\r\n               <label  for='mail'>Email</label>\r\n               <input id='mail' value={data} onChange={(e)=>setdata(e.target.value)}  name='mail' className='ring-1 ring-neutral-500 rounded-sm outline-none px-2 py-1 text-[16px] text-neutral-700 '></input>\r\n               <p>RIB: {resp.rib}</p>\r\n                <p>CIN: {resp.cin}</p>\r\n                <p>Name: {resp.name}</p>\r\n                <p>Family Name: {resp.familyName}</p>\r\n                <p>Email: {resp.email}</p>\r\n                <p>Balance: {resp.balance}</p>\r\n                <p>Creation Date: {resp.creationDate}</p>\r\n               \r\n               </div>\r\n               <button className='py-2 px-6 bg-neutral-800 hover:bg-neutral-900 transition-all duration-300  text-white rounded-md mt-4 w-full'>View Account </button>\r\n               <div className='text-[16px] text-neutral-600 flex justify-center ml-6 gap-5 w-full'>\r\n                <button type='button' className='hover:text-neutral-800' onClick={()=>props.setForm(1)}>  Add Account  </button>\r\n                -\r\n                <button type='button'  className='hover:text-neutral-800' onClick={()=>props.setForm(3)}>View All Accounts </button>\r\n               </div>\r\n        </form>\r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}