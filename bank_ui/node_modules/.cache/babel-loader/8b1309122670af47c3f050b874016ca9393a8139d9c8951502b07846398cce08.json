{"ast":null,"code":"import axios from\"axios\";import{useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Form3(props){const[resp,setResponse]=useState([]);const sendSoapRequest=async e=>{e.preventDefault();const url='http://127.0.0.1:8000/bank/management/';const soapEnvelope=`<x:Envelope\n    xmlns:x=\"http://schemas.xmlsoap.org/soap/envelope/\"\n    xmlns:ban=\"bank.isg.tn\">\n    <x:Header/>\n    <x:Body>\n        <ban:get_all_accounts></ban:get_all_accounts>\n    </x:Body>\n</x:Envelope>`;const config={headers:{'Content-Type':'text/xml;charset=UTF-8'}};try{const response=await axios.post(url,soapEnvelope,config);const parser=new DOMParser();const xmlDoc=parser.parseFromString(response.data,\"text/xml\");let accounts=[];let data=xmlDoc.getElementsByTagName(\"Account\");for(let acc of data){var _acc$getElementsByTag,_acc$getElementsByTag2,_acc$getElementsByTag3,_acc$getElementsByTag4,_acc$getElementsByTag5,_acc$getElementsByTag6,_acc$getElementsByTag7;const rib=(_acc$getElementsByTag=acc.getElementsByTagName(\"rib\")[0])===null||_acc$getElementsByTag===void 0?void 0:_acc$getElementsByTag.textcontent;const cin=(_acc$getElementsByTag2=acc.getElementsByTagName(\"client\")[0].getElementsByTagName(\"cin\")[0])===null||_acc$getElementsByTag2===void 0?void 0:_acc$getElementsByTag2.textcontent;const name=(_acc$getElementsByTag3=acc.getElementsByTagName(\"client\")[0].getElementsByTagName(\"name\")[0])===null||_acc$getElementsByTag3===void 0?void 0:_acc$getElementsByTag3.textcontent;const family=(_acc$getElementsByTag4=acc.getElementsByTagName(\"client\")[0].getElementsByTagName(\"family\")[0])===null||_acc$getElementsByTag4===void 0?void 0:_acc$getElementsByTag4.textcontent;const mail=(_acc$getElementsByTag5=acc.getElementsByTagName(\"client\")[0].getElementsByTagName(\"email\")[0])===null||_acc$getElementsByTag5===void 0?void 0:_acc$getElementsByTag5.textcontent;const balance=(_acc$getElementsByTag6=acc.getElementsByTagName(\"balance\")[0])===null||_acc$getElementsByTag6===void 0?void 0:_acc$getElementsByTag6.textcontent;const creation=(_acc$getElementsByTag7=acc.getElementsByTagName(\"creationDate\")[0])===null||_acc$getElementsByTag7===void 0?void 0:_acc$getElementsByTag7.textcontent;accounts.push({rib,cin,name,family,mail,balance,creation});}setResponse(accounts);}catch(error){setResponse('Error occurred while adding the account');}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:sendSoapRequest,className:\"text-neutral-800 transition-all duration-300 font-regular text-[18px] px-8 w-full flex flex-col items-center gap-6\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"border-separate border-spacing-2 border border-slate-500\",children:[/*#__PURE__*/_jsxs(\"th\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"rib\"}),/*#__PURE__*/_jsx(\"td\",{children:\"cin\"}),/*#__PURE__*/_jsx(\"td\",{children:\"name\"}),/*#__PURE__*/_jsx(\"td\",{children:\"family\"}),/*#__PURE__*/_jsx(\"td\",{children:\"mail\"}),/*#__PURE__*/_jsx(\"td\",{children:\"balance\"}),/*#__PURE__*/_jsx(\"td\",{children:\"creation   \"})]}),resp.map((acc,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{class:\"border border-slate-600 ...\",children:acc.rib}),/*#__PURE__*/_jsx(\"td\",{class:\"border border-slate-600 ...\",children:acc.cin}),/*#__PURE__*/_jsx(\"td\",{class:\"border border-slate-600 ...\",children:acc.name}),/*#__PURE__*/_jsx(\"td\",{class:\"border border-slate-600 ...\",children:acc.family}),/*#__PURE__*/_jsx(\"td\",{class:\"border border-slate-600 ...\",children:acc.mail}),/*#__PURE__*/_jsx(\"td\",{class:\"border border-slate-600 ...\",children:acc.balance}),/*#__PURE__*/_jsx(\"td\",{class:\"border border-slate-600 ...\",children:acc.creation})]},index))]}),/*#__PURE__*/_jsx(\"button\",{className:\"py-2 px-6 bg-neutral-800 hover:bg-neutral-900 transition-all duration-300  text-white rounded-md mt-4 w-full\",children:\"View All \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-[16px] text-neutral-600 flex justify-center ml-6 gap-5 w-full\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"hover:text-neutral-800\",onClick:()=>props.setForm(2),children:\"  Add Account  \"}),\"-\",/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"hover:text-neutral-800\",onClick:()=>props.setForm(1),children:\"View Account \"})]})]});}","map":{"version":3,"names":["axios","useState","jsx","_jsx","jsxs","_jsxs","Form3","props","resp","setResponse","sendSoapRequest","e","preventDefault","url","soapEnvelope","config","headers","response","post","parser","DOMParser","xmlDoc","parseFromString","data","accounts","getElementsByTagName","acc","_acc$getElementsByTag","_acc$getElementsByTag2","_acc$getElementsByTag3","_acc$getElementsByTag4","_acc$getElementsByTag5","_acc$getElementsByTag6","_acc$getElementsByTag7","rib","textcontent","cin","name","family","mail","balance","creation","push","error","onSubmit","className","children","map","index","class","type","onClick","setForm"],"sources":["C:/Users/blade/OneDrive/Desktop/jdango/bank/bank_ui/src/form3.jsx"],"sourcesContent":["import axios from \"axios\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function Form3(props){\r\n    const [resp, setResponse] = useState([]);\r\n\r\n\r\n    const sendSoapRequest = async (e) => {\r\n            e.preventDefault();\r\n            const url = 'http://127.0.0.1:8000/bank/management/'; \r\n            const soapEnvelope = `<x:Envelope\r\n    xmlns:x=\"http://schemas.xmlsoap.org/soap/envelope/\"\r\n    xmlns:ban=\"bank.isg.tn\">\r\n    <x:Header/>\r\n    <x:Body>\r\n        <ban:get_all_accounts></ban:get_all_accounts>\r\n    </x:Body>\r\n</x:Envelope>`;\r\n        \r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'text/xml;charset=UTF-8',\r\n        },\r\n    };\r\n\r\n    try {\r\n        const response = await axios.post(url, soapEnvelope, config);\r\n        \r\n        const parser = new DOMParser();\r\n        const xmlDoc = parser.parseFromString(response.data, \"text/xml\");\r\n        let accounts = [];\r\n        let data =  xmlDoc.getElementsByTagName(\"Account\") ;\r\n        for (let acc of data ){\r\n            const rib=acc.getElementsByTagName(\"rib\")[0]?.textcontent;\r\n            const cin=acc.getElementsByTagName(\"client\")[0].getElementsByTagName(\"cin\")[0]?.textcontent;\r\n            const name=acc.getElementsByTagName(\"client\")[0].getElementsByTagName(\"name\")[0]?.textcontent;\r\n            const family=acc.getElementsByTagName(\"client\")[0].getElementsByTagName(\"family\")[0]?.textcontent;\r\n            const mail=acc.getElementsByTagName(\"client\")[0].getElementsByTagName(\"email\")[0]?.textcontent;\r\n            const balance =acc.getElementsByTagName(\"balance\")[0]?.textcontent;\r\n            const creation = acc.getElementsByTagName(\"creationDate\")[0]?.textcontent;\r\n            accounts.push({rib,cin,name,family,mail,balance,creation});\r\n        }\r\n\r\n        setResponse(accounts);\r\n\r\n        \r\n\r\n    } catch (error) {\r\n        \r\n        setResponse('Error occurred while adding the account');\r\n    }\r\n};\r\n    return(\r\n        <form onSubmit={sendSoapRequest} className='text-neutral-800 transition-all duration-300 font-regular text-[18px] px-8 w-full flex flex-col items-center gap-6'>\r\n            <table className=\"border-separate border-spacing-2 border border-slate-500\">\r\n                <th><td>rib</td><td>cin</td><td>name</td><td>family</td><td>mail</td><td>balance</td><td>creation   </td></th>\r\n                \r\n                {resp.map((acc,index)=>(\r\n                    <tr key={index}>\r\n                        <td class=\"border border-slate-600 ...\">{acc.rib}</td>\r\n                        <td class=\"border border-slate-600 ...\">{acc.cin}</td>\r\n                        <td class=\"border border-slate-600 ...\">{acc.name}</td>\r\n                        <td class=\"border border-slate-600 ...\">{acc.family}</td>\r\n                        <td class=\"border border-slate-600 ...\">{acc.mail}</td>\r\n                        <td class=\"border border-slate-600 ...\">{acc.balance}</td>\r\n                        <td class=\"border border-slate-600 ...\">{acc.creation}</td>\r\n                    </tr>)\r\n                )}\r\n            </table>\r\n            <button className='py-2 px-6 bg-neutral-800 hover:bg-neutral-900 transition-all duration-300  text-white rounded-md mt-4 w-full'>View All </button>\r\n            <div className='text-[16px] text-neutral-600 flex justify-center ml-6 gap-5 w-full'>\r\n            <button type='button' className='hover:text-neutral-800' onClick={()=>props.setForm(2)}>  Add Account  </button>\r\n                -\r\n                <button type='button'  className='hover:text-neutral-800' onClick={()=>props.setForm(1)}>View Account </button>\r\n            </div>\r\n        </form>\r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}